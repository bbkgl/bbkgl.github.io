---
layout:     post
title:      获取其他进程的全局变量
subtitle:   profile
date:       2019-12-02
author:     bbkgl
header-img: img/post-bg-0007.jpg
catalog: true
tags:
    - profile
---

>微微风簇浪
>
>散作满河星

如何获取存储在bss段上的，未初始化的“其他进程”的全局变量？

首先考虑到的是使用ptrace，但是ptrace获取其他进程的全局变量，需要该变量的地址。

那如何得到对应bss段变量的地址呢？

使用对应程序段的起始地址+变量的地址偏移量，接下来进行验证和说明。

## 程序的地址范围以及调试信息

#### 调试符号

> 可以参考[符号表](<https://www.cnblogs.com/chenxuming/articles/9706161.html>)
>
> [关于elf中的st_value](<https://blog.csdn.net/farmwang/article/details/72848058>)，**一定要看，很重要！！！！**

关于调试信息，可以自行查资料，目前比较常用的就是dwarf，也就是在编译程序的时候加上-g选项，就能在对应可执行文件中加入符号信息。

linux下查看调试符号可以通过`readelf`和`objdump`两个工具

如果使用`readelf -s <exename>`会打印出所有符号的信息：

![](https://ae01.alicdn.com/kf/H75098c05a7404b5f868bd18fd4341b38T.jpg)

如果需要找到对应变量的信息，可以直接`grep`，比如我使用`readelf -s testo | grep g_test`：

![](https://ae01.alicdn.com/kf/H30354019899b496d96a80a34953942c55.jpg)

其中value有可能是偏移量，也有可能就是绝对地址。

**目前关于st_value**的值的定义和作用暂不明确，所以文章先到这里。